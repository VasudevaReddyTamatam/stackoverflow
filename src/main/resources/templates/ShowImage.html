<!DOCTYPE html>
<html xmlns:th="http://www.thymeleaf.org">
<head>
    <title>Image Upload</title>
</head>
<body>
<h1>Upload Image</h1>

<!-- Display success or error message -->
<p th:if="${message}" th:text="${message}"></p>

<!-- Image Upload Form -->
<form th:action="@{/images/upload}" method="post" enctype="multipart/form-data">
    <label for="image">Choose an image to upload:</label>
    <input type="file" id="image" name="image" required />
    <button type="submit">Upload</button>
</form>

<!--<div th:if="${image != null}">-->
<!--    <h2>Uploaded Image: </h2>-->
<!--    <img th:src="@{'/images/' + ${image.id}}" alt="Image" style="max-width: 500px;" />-->
<!--</div>-->

<div th:if="${error != null}">
    <p th:text="${error}"></p>
</div>
<!-- Show uploaded image -->
<div th:if="${image != null}">
    <h2>Uploaded Image: </h2>
    <p th:text="${image.data}"></p>
    <!-- Embed the image by using the URL to fetch image data -->
    <img th:src="@{'/images/getImage/' + ${image.id}}" alt="Image" style="max-width: 500px;" />
</div>

<!-- Fetch Image Button (if user knows image ID) -->
<h2>Fetch Image by ID:</h2>
<form th:action="@{/images/{id}(id=${id})}" method="get">
    <input type="text" name="id" placeholder="Enter Image ID" required />
    <button type="submit">Fetch Image</button>
</form>

</body>
</html>
